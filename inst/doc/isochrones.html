<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2024-04-11" />

<title>Isochrones</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>

<style type="text/css">
p.abstract{
text-align: center;
font-weight: bold;
}
div.abstract{
margin: auto;
width: 90%;
}
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Isochrones</h1>
<h4 class="date">2024-04-11</h4>
<div class="abstract">
<p class="abstract">Abstract</p>
This vignette shows how to calculate and visualize isochrones in R using
the <code>r5r</code> package.
</div>



<div id="introduction" class="section level1">
<h1>1. Introduction</h1>
<p>An isochrone map shows how far one can travel from a given place
within a certain amount of time. In other other words, it shows all the
areas reachable from that place within a maximum travel time. This
vignette shows how to calculate and visualize isochrones in R using the
<a href="https://ipeagit.github.io/r5r/index.html"><code>r5r</code>
package</a> using a reproducible example. In this example, we will be
using a sample data set for the city of Porto Alegre (Brazil) included
in <code>r5r</code>. Our aim here is to calculate several isochrones
departing from the central bus station given different travel time
thresholds.</p>
<p>There are two ways to calculate / visualize isochrones using
<code>r5r</code>. The quick and easy option is using the
<code>r5r::isochrone()</code> function. The other alternative requires
one to first calculate travel time estimates, and then to do some
spatial interpolation operations. We will cover both approaches in this
vignette.</p>
<p>Before we start, we need to increase Java memory + load a few
libraries, and to build routable transport network.</p>
<p><strong><em>Warning:</em></strong> If you want to calculate how many
opportunities (e.g.Â jobs, or schools or hospitals) are located inside
each isochrone, we strongly recommend you NOT to use the
<code>isochrone()</code> function. You will find much more efficient
ways to do this in the <a href="https://ipeagit.github.io/r5r/articles/accessibility.html">Accessibility
vignette</a>.</p>
</div>
<div id="build-routable-transport-network-with-setup_r5" class="section level1">
<h1>2. Build routable transport network with
<code>setup_r5()</code></h1>
<div id="increase-java-memory-and-load-libraries" class="section level3">
<h3>Increase Java memory and load libraries</h3>
<p>First, we need to increase the memory available to Java and load the
packages used in this vignette. Please note we allocate RAM memory to
Java <em>before</em> loading our libraries.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">java.parameters =</span> <span class="st">&quot;-Xmx2G&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(r5r)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">library</span>(interp)</span></code></pre></div>
<p>To build a routable transport network with <code>r5r</code>, the user
needs to call <code>setup_r5()</code> with the path to the directory
where OpenStreetMap and GTFS data are stored.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># system.file returns the directory with example data inside the r5r package</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># set data path to directory containing your own data if not running this example</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/poa&quot;</span>, <span class="at">package =</span> <span class="st">&quot;r5r&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>r5r_core <span class="ot">&lt;-</span> <span class="fu">setup_r5</span>(data_path)</span></code></pre></div>
</div>
</div>
<div id="isochrone-quick-and-easy-approach" class="section level1">
<h1>3. Isochrone: quick and easy approach</h1>
<p>The quick and easy approach to estimate / visualize an isochrone is
to use the <code>isochrone()</code> function built in the
<code>r5r</code> package. In this example, we will be calculating the
isochrones by public transport from the central bus station in Porto
Alegre. The <code>isochrone()</code> function calculates isochrones
considering the travel times from the origin point to a random sample of
<code>80%</code> of all nodes in the transport network (default). The
size of the sample can be fine tuned with the <code>sample_size</code>
parameter.</p>
<p>With the code below, <code>r5r</code> determines the isochrones
considering the median travel time of multiple travel time estimates
calculated departing every minute over a 120-minute time window, between
2pm and 4pm.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># read all points in the city</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">file.path</span>(data_path, <span class="st">&quot;poa_hexgrid.csv&quot;</span>))</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># subset point with the geolocation of the central bus station</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>central_bus_stn <span class="ot">&lt;-</span> points[<span class="dv">291</span>,]</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># isochrone intervals</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>time_intervals <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co"># routing inputs</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>mode <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;WALK&quot;</span>, <span class="st">&quot;TRANSIT&quot;</span>)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>max_walk_time <span class="ot">&lt;-</span> <span class="dv">30</span>      <span class="co"># in minutes</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>max_trip_duration <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="co"># in minutes</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>time_window <span class="ot">&lt;-</span> <span class="dv">120</span>       <span class="co"># in minutes</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>departure_datetime <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">&quot;13-05-2019 14:00:00&quot;</span>,</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>                                 <span class="at">format =</span> <span class="st">&quot;%d-%m-%Y %H:%M:%S&quot;</span>)</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co"># calculate travel time matrix</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>iso1 <span class="ot">&lt;-</span> r5r<span class="sc">::</span><span class="fu">isochrone</span>(r5r_core,</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>                       <span class="at">origins =</span> central_bus_stn,</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>                       <span class="at">mode =</span> mode,</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>                       <span class="at">cutoffs =</span> time_intervals,</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>                       <span class="at">sample_size =</span> <span class="dv">1</span>,</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>                       <span class="at">departure_datetime =</span> departure_datetime,</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>                       <span class="at">max_walk_time =</span> max_walk_time,</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>                       <span class="at">max_trip_duration =</span> max_trip_duration,</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>                       <span class="at">time_window =</span> time_window,</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>                       <span class="at">progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>As you can see, the <code>isochrone()</code> functions works very
similarly to the <code>travel_time_matrix()</code> function, but instead
of returning a table with travel time estimates, it returns a
<code>POLYGON  &quot;sf&quot; &quot;data.frame&quot;</code> for each isochrone of each
origin.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">head</span>(iso1)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 6 features and 2 fields</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: -51.2648 ymin: -30.1133 xmax: -51.1322 ymax: -29.9966</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt;                id isochrone                       polygons</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt; 1 89a90128a8fffff       100 POLYGON ((-51.2572 -30.111,...</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; 2 89a90128a8fffff        90 POLYGON ((-51.2572 -30.111,...</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 3 89a90128a8fffff        80 POLYGON ((-51.2572 -30.111,...</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 4 89a90128a8fffff        70 POLYGON ((-51.2572 -30.111,...</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 5 89a90128a8fffff        60 POLYGON ((-51.2558 -30.1105...</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 6 89a90128a8fffff        50 POLYGON ((-51.2483 -30.0831...</span></span></code></pre></div>
<p>Now it becomes super simple to visualize our isochrones on a map:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># extract OSM network</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>street_net <span class="ot">&lt;-</span> <span class="fu">street_network_to_sf</span>(r5r_core)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>main_roads <span class="ot">&lt;-</span> <span class="fu">subset</span>(street_net<span class="sc">$</span>edges, street_class <span class="sc">%like%</span> <span class="st">&#39;PRIMARY|SECONDARY&#39;</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;#ffe0a5&#39;</span>,<span class="st">&#39;#ffcb69&#39;</span>,<span class="st">&#39;#ffa600&#39;</span>,<span class="st">&#39;#ff7c43&#39;</span>,<span class="st">&#39;#f95d6a&#39;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>            <span class="st">&#39;#d45087&#39;</span>,<span class="st">&#39;#a05195&#39;</span>,<span class="st">&#39;#665191&#39;</span>,<span class="st">&#39;#2f4b7c&#39;</span>,<span class="st">&#39;#003f5c&#39;</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> iso1, <span class="fu">aes</span>(<span class="at">fill=</span><span class="fu">factor</span>(isochrone)), <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> main_roads, <span class="at">color =</span> <span class="st">&quot;gray55&quot;</span>, <span class="at">size=</span><span class="fl">0.01</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> central_bus_stn, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">color=</span><span class="st">&#39;Central bus</span><span class="sc">\n</span><span class="st">station&#39;</span>)) <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  <span class="co"># scale_fill_viridis_d(direction = -1, option = &#39;B&#39;) +</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(colors) ) <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&#39;Central bus</span><span class="sc">\n</span><span class="st">station&#39;</span><span class="ot">=</span><span class="st">&#39;black&#39;</span>)) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Travel time</span><span class="sc">\n</span><span class="st">(in minutes)&quot;</span>, <span class="at">color=</span><span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="100%" /></p>
</div>
<div id="isochrone-alternative" class="section level1">
<h1>4 Isochrone alternative</h1>
<p>This second approach to calculating isochrones with <code>r5r</code>
takes a few more steps because it requires the spatial interpolation of
travel time estimates, but it generates more refined maps. It takes two
steps.</p>
</div>
<div id="calculate-travel-times" class="section level1">
<h1>4.1 Calculate travel times</h1>
<p>First, we calculate the travel times by public transport from the
central bus station in Porto Alegre to multiple destinations we input to
the function. Here, we input the <code>points</code> data frame, which
comprises the centroids of a hexagonal grid at a fine spatial
resolution.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># calculate travel time matrix</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>ttm <span class="ot">&lt;-</span> <span class="fu">travel_time_matrix</span>(r5r_core,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                          <span class="at">origins =</span> central_bus_stn,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                          <span class="at">destinations =</span> points,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>                          <span class="at">mode =</span> mode,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>                          <span class="at">departure_datetime =</span> departure_datetime,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>                          <span class="at">max_walk_time =</span> max_walk_time,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>                          <span class="at">max_trip_duration =</span> max_trip_duration,</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>                          <span class="at">time_window =</span> time_window,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>                          <span class="at">progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="fu">head</span>(ttm)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt;            from_id           to_id travel_time_p50</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt;             &lt;char&gt;          &lt;char&gt;           &lt;int&gt;</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 1: 89a90128a8fffff 89a901291abffff              61</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; 2: 89a90128a8fffff 89a9012a3cfffff              84</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; 3: 89a90128a8fffff 89a901295b7ffff              63</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; 4: 89a90128a8fffff 89a901284a3ffff              66</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co">#&gt; 5: 89a90128a8fffff 89a9012809bffff              55</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; 6: 89a90128a8fffff 89a901285cfffff              45</span></span></code></pre></div>
</div>
<div id="spatial-interpolation-of-travel-times" class="section level1">
<h1>4.2 Spatial interpolation of travel times</h1>
<p>Now we need to bring the spatial coordinates information to our
travel time matrix output <code>ttm</code>, and do some spatial
interpolation of travel time estimates.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># add coordinates of destinations to travel time matrix</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>ttm[points, on<span class="ot">=</span><span class="fu">c</span>(<span class="st">&#39;to_id&#39;</span> <span class="ot">=</span><span class="st">&#39;id&#39;</span>), <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(<span class="at">lon =</span> i.lon, <span class="at">lat =</span> i.lat)]</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># interpolate estimates to get spatially smooth result</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>travel_times.interp <span class="ot">&lt;-</span> <span class="fu">with</span>(<span class="fu">na.omit</span>(ttm), <span class="fu">interp</span>(lon, lat, travel_time_p50)) <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>                        <span class="fu">with</span>(<span class="fu">cbind</span>(<span class="at">travel_time=</span><span class="fu">as.vector</span>(z),  <span class="co"># Column-major order</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>                                   <span class="at">x=</span><span class="fu">rep</span>(x, <span class="at">times=</span><span class="fu">length</span>(y)),</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>                                   <span class="at">y=</span><span class="fu">rep</span>(y, <span class="at">each=</span><span class="fu">length</span>(x)))) <span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>                            <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">na.omit</span>()</span></code></pre></div>
<p>With just a few more lines of code, we get our isochrones on a
map:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># find isochrone&#39;s bounding box to crop the map below</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>bb_x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">min</span>(travel_times.interp<span class="sc">$</span>x), <span class="fu">max</span>(travel_times.interp<span class="sc">$</span>x))</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>bb_y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">min</span>(travel_times.interp<span class="sc">$</span>y), <span class="fu">max</span>(travel_times.interp<span class="sc">$</span>y))</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">ggplot</span>(travel_times.interp) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> main_roads, <span class="at">color =</span> <span class="st">&quot;gray55&quot;</span>, <span class="at">size=</span><span class="fl">0.01</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="fu">geom_contour_filled</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">z=</span>travel_time), <span class="at">alpha=</span>.<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">color=</span><span class="st">&#39;Central bus</span><span class="sc">\n</span><span class="st">station&#39;</span>),</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>             <span class="at">data=</span>central_bus_stn) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="co"># scale_fill_viridis_d(direction = -1, option = &#39;B&#39;) +</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(colors) ) <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&#39;Central bus</span><span class="sc">\n</span><span class="st">station&#39;</span><span class="ot">=</span><span class="st">&#39;black&#39;</span>)) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> bb_x, <span class="at">ylim =</span> bb_y) <span class="sc">+</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Travel time</span><span class="sc">\n</span><span class="st">(in minutes)&quot;</span>, <span class="at">color=</span><span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="100%" /></p>
<div id="cleaning-up-after-usage" class="section level3">
<h3>Cleaning up after usage</h3>
<p><code>r5r</code> objects are still allocated to any amount of memory
previously set after they are done with their calculations. In order to
remove an existing <code>r5r</code> object and reallocate the memory it
had been using, we use the <code>stop_r5</code> function followed by a
call to Javaâs garbage collector, as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>r5r<span class="sc">::</span><span class="fu">stop_r5</span>(r5r_core)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>rJava<span class="sc">::</span><span class="fu">.jgc</span>(<span class="at">R.gc =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>If you have any suggestions or want to report an error, please visit
<a href="https://github.com/ipeaGIT/r5r">the package GitHub
page</a>.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
